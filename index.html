<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Stunning Funicular</title>

  <!-- PWA manifest (inlined as JSON) -->
  <link rel="manifest" id="manifest-placeholder">

  <!-- PWA metadata -->
  <meta name="theme-color" content="#317EFB" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="Stunning Funicular" />

  <!-- Icons -->
  <link rel="apple-touch-icon" href="https://adnanali9262.github.io/stunningfanicular/icon-192.png" />
  <link rel="icon" type="image/png" sizes="192x192" href="https://adnanali9262.github.io/stunningfanicular/icon-192.png" />
  <link rel="icon" type="image/png" sizes="512x512" href="https://adnanali9262.github.io/stunningfanicular/icon-512.png" />
</head>
<body>
  <h1>Hello, Stunning Funicular ðŸš€</h1>
  <p>This app is now PWA ready.</p>

  <script>
    // Inject manifest inline
    const manifest = {
      "name": "Stunning Funicular",
      "short_name": "Funicular",
      "start_url": ".",
      "display": "standalone",
      "background_color": "#ffffff",
      "theme_color": "#317EFB",
      "icons": [
        {
          "src": "https://adnanali9262.github.io/stunningfanicular/icon-192.png",
          "sizes": "192x192",
          "type": "image/png"
        },
        {
          "src": "https://adnanali9262.github.io/stunningfanicular/icon-512.png",
          "sizes": "512x512",
          "type": "image/png"
        }
      ]
    };

    const blob = new Blob([JSON.stringify(manifest)], { type: 'application/json' });
    const manifestURL = URL.createObjectURL(blob);
    document.getElementById('manifest-placeholder').setAttribute('href', manifestURL);

    // Inline service worker
    const swCode = `
      self.addEventListener('install', (event) => {
        event.waitUntil(
          caches.open('app-cache-v1').then((cache) => {
            return cache.addAll(['./']);
          })
        );
      });

      self.addEventListener('fetch', (event) => {
        event.respondWith(
          caches.match(event.request).then((response) => {
            return response || fetch(event.request);
          })
        );
      });
    `;

    const swBlob = new Blob([swCode], { type: 'application/javascript' });
    const swUrl = URL.createObjectURL(swBlob);

    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register(swUrl).then(() => {
        console.log('Service Worker registered âœ…');
      });
    }
  </script>
</body>
</html>
